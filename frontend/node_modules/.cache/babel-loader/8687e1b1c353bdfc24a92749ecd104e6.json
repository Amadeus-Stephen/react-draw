{"ast":null,"code":"var _jsxFileName = \"/home/vayne/Desktop/drawingthings/src/index.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { SketchPicker } from \"react-color\";\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport './index.css';\nimport axios from \"axios\";\n\nclass Canvas extends React.Component {\n  constructor(props, match) {\n    super(props, match);\n    this.state = {\n      color: this.props.color,\n      painting: false,\n      dimensions: this.props.dimensions,\n      canvasdata: ''\n    };\n    this.ctx = \"\";\n    this.startdraw = this.startdraw.bind(this);\n    this.enddraw = this.enddraw.bind(this);\n    this.draw = this.draw.bind(this);\n    this.touchend = this.touchend.bind(this);\n    this.touchdraw = this.touchdraw.bind(this);\n  }\n\n  componentDidMount() {\n    const canvas = document.getElementById(\"canvas\");\n    this.ctx = canvas.getContext(\"2d\");\n    canvas.height = 800;\n    canvas.width = 800;\n    canvas.addEventListener('mousedown', this.startdraw);\n    canvas.addEventListener('mouseup', this.enddraw);\n    canvas.addEventListener('mousemove', this.draw);\n    canvas.addEventListener('touchend', this.touchend, false);\n    canvas.addEventListener('touchmove', this.touchdraw, false);\n    axios.get(`http://192.168.1.251:5000/canvases/${this.props.id}`).then(response => {\n      this.setState({\n        canvasdata: response.data.canvas\n      });\n      let image = new Image();\n      image.src = response.data.canvas;\n      this.ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidUpdate() {\n    let color = this.props.color;\n\n    if (this.state.color !== color) {\n      this.setState({\n        color: color\n      });\n    }\n\n    let dimensions = this.props.dimensions;\n\n    if (this.state.dimensions !== dimensions) {\n      this.setState({\n        dimensions: dimensions\n      });\n    }\n  }\n\n  startdraw() {\n    this.setState({\n      painting: true\n    });\n  }\n\n  enddraw() {\n    this.setState({\n      painting: false\n    });\n    this.ctx.beginPath();\n  }\n\n  draw(e) {\n    if (this.state.painting) {\n      console.log(e.offsetX, e.offsetY);\n      this.ctx.lineWidth = this.state.dimensions;\n      this.ctx.lineCap = \"round\";\n      this.ctx.lineTo(e.offsetX, e.offsetY);\n      this.ctx.strokeStyle = this.state.color;\n      this.ctx.stroke();\n      this.ctx.beginPath();\n      this.ctx.moveTo(e.offsetX, e.offsetY);\n    } else {\n      return;\n    }\n  }\n\n  touchdraw(e) {\n    console.log(e.touches[0]);\n    e.preventDefault();\n    this.ctx.lineWidth = this.state.dimensions;\n    this.ctx.lineCap = \"round\";\n    this.ctx.lineTo(e.touches[0].clientX - e.touches[0].screenX, e.touches[0].clientY + 61);\n    this.strokeStyle = this.state.color;\n    this.ctx.stroke();\n    this.ctx.beginPath();\n    this.ctx.moveTo(e.touches[0].clientX - e.touches[0].screenX, e.touches[0].clientY + 61);\n  }\n\n  touchend(e) {\n    e.preventDefault();\n    this.ctx.beginPath();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      id: \"canvas\",\n      className: \"canvas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 12\n      }\n    }));\n  }\n\n}\n\nclass DimensionSelectorSlider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.props.onDimensionSelectorChange(event.target.value);\n  }\n\n  render() {\n    const dimensions = this.props.dimensions;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"range\",\n      min: \"1\",\n      max: \"100\",\n      value: dimensions,\n      id: \"myRange\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nclass ColorSelector extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      displayColorPicker: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  handleClick() {\n    this.setState({\n      displayColorPicker: !this.state.displayColorPicker\n    });\n  }\n\n  handleClose() {\n    this.setState({\n      displayColorPicker: false\n    });\n  }\n\n  handleChange(event) {\n    this.props.onColorSelectorChange(event.hex);\n  }\n\n  render() {\n    const color = this.props.color;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"changlecolorbtn\",\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: color\n      },\n      className: \"btncolor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    })), this.state.displayColorPicker ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"colormenu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 51\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menucovor\",\n      onClick: this.handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 78\n      }\n    }), /*#__PURE__*/React.createElement(SketchPicker, {\n      color: color,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 134\n      }\n    })) : null);\n  }\n\n}\n\nclass SaveCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    this.props.onCanvasSave();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 448 512\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 91\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 153\n      }\n    })));\n  }\n\n}\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dimensions: 10,\n      color: \"#000000\"\n    };\n    this.onDimensionSelectorChange = this.onDimensionSelectorChange.bind(this);\n    this.onColorSelectorChange = this.onColorSelectorChange.bind(this);\n    this.onCanvasSave = this.onCanvasSave.bind(this);\n  }\n\n  onColorSelectorChange(color) {\n    this.setState({\n      color: color\n    });\n  }\n\n  onDimensionSelectorChange(dimensions) {\n    this.setState({\n      dimensions: dimensions\n    });\n  }\n\n  onCanvasSave() {\n    const getcanvas = document.getElementById(\"canvas\");\n    const canvasdata = getcanvas.toDataURL();\n    const canvas = {\n      canvas: canvasdata\n    };\n    fetch(`http://192.168.1.251:5000/canvases/update/${this.props.match.params.id}`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(canvas)\n    }).then(response => response.json()).then(data => {\n      console.log(\"Success:\", data);\n    }).catch(error => {\n      console.error(\"Error:\", error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar navbar-dark bg-dark containinput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item nav-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"btn badge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(SaveCanvas, {\n      onCanvasSave: this.onCanvasSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item nav-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"btn badge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ColorSelector, {\n      onColorSelectorChange: this.onColorSelectorChange,\n      color: this.state.color,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \" badge inputslider\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DimensionSelectorSlider, {\n      onDimensionSelectorChange: this.onDimensionSelectorChange,\n      dimensions: this.state.dimensions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item nav-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"btn badge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 30\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 512 512\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 82\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M8 256c0 137 111 248 248 248s248-111 248-248S393 8 256 8 8 119 8 256zm448 0c0 110.5-89.5 200-200 200S56 366.5 56 256 145.5 56 256 56s200 89.5 200 200zm-72-20v40c0 6.6-5.4 12-12 12H256v67c0 10.7-12.9 16-20.5 8.5l-99-99c-4.7-4.7-4.7-12.3 0-17l99-99c7.6-7.6 20.5-2.2 20.5 8.5v67h116c6.6 0 12 5.4 12 12z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 144\n      }\n    })))))))), /*#__PURE__*/React.createElement(Canvas, {\n      color: this.state.color,\n      dimensions: this.state.dimensions,\n      id: this.props.match.params.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\nclass App extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      component: HomePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/canvas/:id\",\n      exact: true,\n      component: Index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 65\n      }\n    }));\n  }\n\n}\n\nclass CanvasImage extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(Link, {\n      to: `/canvas/${this.props.canvas._id}`,\n      className: \"canvaslink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `${this.props.canvas.canvas}`,\n      className: \"col imageframe\",\n      alt: \"PlaceholderImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 81\n      }\n    }));\n  }\n\n}\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      canvases: []\n    };\n  }\n\n  componentDidMount() {\n    axios.get('http://192.168.1.251:5000/canvases/').then(response => {\n      if (response.data.length === 0) {\n        const newCanvas = {\n          canvas: 1\n        };\n        axios.post('http://192.168.1.251:5000/canvases/create', newCanvas).then(res => console.log(res.data));\n      } else {\n        this.setState({\n          canvases: response.data\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  displayCanvases() {\n    return this.state.canvases.map(i => {\n      return /*#__PURE__*/React.createElement(CanvasImage, {\n        key: i._id,\n        canvas: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 14\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar navbar-dark bg-dark containinput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item nav-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"btn badge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }\n    }, \" add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row row-cols-2 box \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 7\n      }\n    }, this.displayCanvases()));\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 17\n  }\n}), document.getElementById(\"root\"));","map":{"version":3,"sources":["/home/vayne/Desktop/drawingthings/src/index.js"],"names":["React","ReactDOM","SketchPicker","BrowserRouter","Router","Route","Link","axios","Canvas","Component","constructor","props","match","state","color","painting","dimensions","canvasdata","ctx","startdraw","bind","enddraw","draw","touchend","touchdraw","componentDidMount","canvas","document","getElementById","getContext","height","width","addEventListener","get","id","then","response","setState","data","image","Image","src","drawImage","catch","error","console","log","componentDidUpdate","beginPath","e","offsetX","offsetY","lineWidth","lineCap","lineTo","strokeStyle","stroke","moveTo","touches","preventDefault","clientX","screenX","clientY","render","DimensionSelectorSlider","handleChange","event","onDimensionSelectorChange","target","value","ColorSelector","displayColorPicker","handleClick","handleClose","onColorSelectorChange","hex","background","SaveCanvas","onCanvasSave","Index","getcanvas","toDataURL","fetch","params","method","headers","Accept","body","JSON","stringify","json","App","HomePage","CanvasImage","_id","canvases","length","newCanvas","post","res","displayCanvases","map","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { SketchPicker } from \"react-color\";\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport \"bootstrap/dist/css/bootstrap.min.css\"\nimport './index.css'\nimport axios from \"axios\";\n\nclass Canvas extends React.Component {\n  constructor(props, match) {\n    super(props,match);\n    this.state = { color: this.props.color, painting: false, dimensions:this.props.dimensions, canvasdata:''};\n    this.ctx = \"\";\n    this.startdraw = this.startdraw.bind(this);\n    this.enddraw = this.enddraw.bind(this);\n    this.draw = this.draw.bind(this);\n    this.touchend = this.touchend.bind(this)\n    this.touchdraw = this.touchdraw.bind(this)\n    \n  }\n  componentDidMount() {\n    const canvas = document.getElementById(\"canvas\");\n    this.ctx = canvas.getContext(\"2d\");\n    canvas.height = 800;\n    canvas.width = 800;\n    canvas.addEventListener('mousedown', this.startdraw)\n    canvas.addEventListener('mouseup', this.enddraw)\n    canvas.addEventListener('mousemove', this.draw)\n    canvas.addEventListener('touchend', this.touchend , false)\n    canvas.addEventListener('touchmove', this.touchdraw , false)\n    axios.get(`http://192.168.1.251:5000/canvases/${this.props.id}`)\n    .then(response => {\n      this.setState({canvasdata:response.data.canvas})\n      let image = new Image();\n      image.src=response.data.canvas\n      this.ctx.drawImage(image,0,0,canvas.width,canvas.height);\n    }).catch(function (error) {\n      console.log(error)\n    })\n  }\n  componentDidUpdate() {\n    let color =this.props.color\n    if (this.state.color !== color) {\n      this.setState({color:color})\n    }\n    let dimensions = this.props.dimensions \n    if (this.state.dimensions  !== dimensions){\n      this.setState({dimensions:dimensions})\n    }\n  }\n\n  startdraw() {\n    this.setState({ painting: true });\n\n  }\n  enddraw() {\n    this.setState({ painting: false });\n    this.ctx.beginPath();\n  }\n  draw(e) {\n    if (this.state.painting) {\n      console.log(e.offsetX , e.offsetY)\n      this.ctx.lineWidth = this.state.dimensions;\n      this.ctx.lineCap = \"round\";\n      this.ctx.lineTo(e.offsetX, e.offsetY );\n      this.ctx.strokeStyle = this.state.color;\n      this.ctx.stroke();\n      this.ctx.beginPath();\n      this.ctx.moveTo(e.offsetX, e.offsetY );\n    } else {\n      return;\n    }\n  }\n  touchdraw(e) {\n    console.log(e.touches[0])\n    e.preventDefault();\n    this.ctx.lineWidth = this.state.dimensions;\n    this.ctx.lineCap = \"round\";\n    this.ctx.lineTo(e.touches[0].clientX -e.touches[0].screenX, e.touches[0].clientY + 61);\n    this.strokeStyle = this.state.color\n    this.ctx.stroke();\n    this.ctx.beginPath();\n    this.ctx.moveTo(e.touches[0].clientX -e.touches[0].screenX, e.touches[0].clientY + 61)\n  }\n  touchend(e) {\n    e.preventDefault();\n    this.ctx.beginPath()\n  }\n  render() {\n  \n    return (\n      <div className=\"box\">\n           <canvas\n        id=\"canvas\"\n        className=\"canvas\"\n      />\n      </div>\n   \n    );\n  }\n}\n\nclass DimensionSelectorSlider extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    this.props.onDimensionSelectorChange(event.target.value);\n  }\n  render() {\n    const dimensions = this.props.dimensions\n    return (\n      <div className=\"d-flex flex-row\" >\n        <input type=\"range\" min=\"1\" max=\"100\" value={dimensions} id=\"myRange\" onChange={this.handleChange} />\n      </div>\n    )\n  }\n}\n\nclass ColorSelector extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      displayColorPicker: false,\n    };\n    this.handleChange = this.handleChange.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n    this.handleClose = this.handleClose.bind(this)\n   \n    \n  }\n  handleClick() {\n    this.setState({ displayColorPicker: !this.state.displayColorPicker });\n  };\n\n  handleClose() {\n    this.setState({ displayColorPicker: false });\n  };\n\n  handleChange(event) {\n    this.props.onColorSelectorChange(event.hex)\n  };\n  \n  render() {\n    const color = this.props.color\n    return (\n      <div>\n          <div className=\"changlecolorbtn\"onClick={this.handleClick}>\n          <div style={{background: color}} className=\"btncolor\"/>\n          </div>{this.state.displayColorPicker ? (<div className=\"colormenu\"><div className=\"menucovor\" onClick={this.handleClose} /><SketchPicker color={color} onChange={this.handleChange}/></div>) : null}\n      </div>\n    );\n  }\n}\nclass SaveCanvas extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleClick = this.handleClick.bind(this)\n  }\n  handleClick() {\n    this.props.onCanvasSave()\n  }\n  render() {\n    return <button type=\"button\" className=\"btn btn-secondary\" onClick={this.handleClick}><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z\"/></svg></button>\n  }\n}\nclass Index extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { \n      dimensions: 10,\n      color: \"#000000\",\n    }\n    this.onDimensionSelectorChange = this.onDimensionSelectorChange.bind(this)\n    this.onColorSelectorChange = this.onColorSelectorChange.bind(this)\n    this.onCanvasSave = this.onCanvasSave.bind(this)\n  }\n  onColorSelectorChange(color) {\n    this.setState({color:color})\n  }\n  onDimensionSelectorChange(dimensions) {\n    this.setState({dimensions:dimensions})\n  }\n  onCanvasSave() {\n    const getcanvas = document.getElementById(\"canvas\");\n    const canvasdata = getcanvas.toDataURL();\n    const canvas = {\n      canvas:canvasdata\n    }\n    fetch(`http://192.168.1.251:5000/canvases/update/${this.props.match.params.id}`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(canvas),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(\"Success:\", data);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  }\n  \n  render() {\n    return (\n      <div>\n        \n      <nav className=\"navbar navbar-dark bg-dark containinput\">\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item nav-link\"  >\n          <span className=\"btn badge\">\n          <SaveCanvas onCanvasSave={this.onCanvasSave}/>\n          </span>\n      </li>\n        <li className=\"nav-item nav-link\"  >\n          <span className=\"btn badge\">\n          <ColorSelector onColorSelectorChange={this.onColorSelectorChange} color={this.state.color}/>\n          </span>\n      </li>\n        <li className=\"nav-item \">\n            <span className=\" badge inputslider\">\n            <DimensionSelectorSlider onDimensionSelectorChange={this.onDimensionSelectorChange} dimensions={this.state.dimensions} />\n            </span>\n        </li>\n        <li className=\"nav-item nav-link\"  >\n            <span className=\"btn badge\">\n              <Link to={\"/\"}><button type=\"button\" className=\"btn btn-secondary\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M8 256c0 137 111 248 248 248s248-111 248-248S393 8 256 8 8 119 8 256zm448 0c0 110.5-89.5 200-200 200S56 366.5 56 256 145.5 56 256 56s200 89.5 200 200zm-72-20v40c0 6.6-5.4 12-12 12H256v67c0 10.7-12.9 16-20.5 8.5l-99-99c-4.7-4.7-4.7-12.3 0-17l99-99c7.6-7.6 20.5-2.2 20.5 8.5v67h116c6.6 0 12 5.4 12 12z\"/></svg></button></Link>\n              \n            </span>\n        </li>\n      </ul>\n      </nav>\n      <Canvas color={this.state.color} dimensions={this.state.dimensions} id={this.props.match.params.id}/>\n      </div>\n    );\n  }\n}\nclass App extends React.Component {\n  render() {\n    return <Router><Route path=\"/\" exact component={HomePage} /><Route path=\"/canvas/:id\" exact component={Index} /></Router> \n  }\n}\nclass CanvasImage extends React.Component {\n  render() {\n    return <Link to={`/canvas/${this.props.canvas._id}`} className=\"canvaslink\"><img src={`${this.props.canvas.canvas}`} className=\"col imageframe\" alt=\"PlaceholderImage\"/></Link> \n  }\n}\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {canvases:[]}\n  }\n  componentDidMount() {\n    axios.get('http://192.168.1.251:5000/canvases/')\n    .then(response => {\n      if (response.data.length === 0) {\n          const newCanvas = { canvas: 1}\n          axios.post('http://192.168.1.251:5000/canvases/create', newCanvas)\n          .then(res => console.log(res.data))\n      }else {\n        this.setState({canvases:response.data})\n\n      }\n    })\n    .catch((error) => {\n      console.log(error)\n    })\n  }\n  displayCanvases() {\n    \n    return this.state.canvases.map(i => {\n     \n      return <CanvasImage key={i._id} canvas={i} />\n    })\n  }\n  render() {\n    return <div>\n      <nav className=\"navbar navbar-dark bg-dark containinput\">\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item nav-link\">\n        <span className=\"btn badge\">\n          <button > add</button>\n          </span>\n        </li>\n      </ul>\n      </nav>\n      <div className=\"row row-cols-2 box \">{this.displayCanvases()}</div>\n      </div>\n  }\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"]},"metadata":{},"sourceType":"module"}